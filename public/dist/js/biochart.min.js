var axis=function(t){"use strict";function e(t,e){return d3.axisTop?i(t,e):n(t,e)}function n(t,e){return d3.svg.axis().scale(t).orient(e)}function i(t,e){return d3["axis"+util.camelCase(e)](t)}function a(e,n,i){return util.loop(n,function(n,a){e[n]&&e[n](t.option[n](i,a))}),e}function r(t,e){return e?t.selectAll(e).remove():t}var o={axies:{}};return t.element=function(e){return e="Object"===util.varType(e)?e:/\W/.test(e[0])?d3.select(e):d3.select("#"+e),o.current=e,t},t.option={tickValues:function(t,e){for(var n=util.minmax(t).max/(e-1),i=[],a=0;a<e-1;a++)i.push(a*n);return i.push(util.minmax(t).max),i}},t.top=function(t){var n=size.setMargin(t.margin),i=draw.size(o.current),l=[n.top,n.left],s=scale.get(t.data,[n.left,i.w-n.right]),c=render.addGroup(o.current,l[0],l[1]);return c.call(a(e(s,"top"),t.opt,t.data)),r(c,t.opt.remove),c},t.left=function(t){var n=size.setMargin(t.margin),i=draw.size(o.current),l=[n.top,i.w-n.right],s=scale.get(t.data,[n.top,i.h-n.bottom]),c=render.addGroup(o.current,l[0],l[1]);return c.call(a(e(s,"left"),t.opt,t.data)),r(c,t.opt.remove),c},t.bottom=function(t){var n=size.setMargin(t.margin),i=draw.size(o.current),l=[i.h-n.bottom,n.left],s=scale.get(t.data,[n.left,i.w-n.right]),c=render.addGroup(o.current,l[0],l[1]);return c.call(a(e(s,"bottom"),t.opt,t.data)),r(c,t.opt.remove),c},t.right=function(t){var n=size.setMargin(t.margin),i=draw.size(o.current),l=[n.top,n.left],s=scale.get(t.data,[n.top,i.h-n.bottom]),c=render.addGroup(o.current,l[0],l[1]);return c.call(a(e(s,"right"),t.opt,t.data)),r(c,t.opt.remove),c},t}(axis||{}),bar=function(t){"use strict";function e(t){var e=draw.size(a.e),n=[a.m.left,(a.w||e.w)-a.m.right],i=[a.m.top,(a.h||e.h)-a.m.bottom];return{x:"top"===t||"bottom"===t||"right"===t?n:n.reverse(),y:"left"===t||"right"===t||"bottom"===t?i:i.reverse()}}function n(t,n,i){return scale.get(n,e(t)[i])}function i(t){t.m=a.m,t.sx=a.sx,t.sy=a.sy,t.dx=this.xaxis,t.dy=this.yaxis}var a={};return function(t){return a={},a.e=t.element="Object"===util.varType(t.element)?t.element:/\W/.test(t.element[0])?d3.select(t.element):d3.select("#"+t.element),a.e=util.d3v4()?a.e:a.e[0][0],a.w=t.width||null,a.h=t.height||null,a.m=size.setMargin(t.margin),a.t=a.m.top||0,a.l=a.m.left||0,a.g=render.addGroup(a.e,a.t,a.l),a.sx=n(t.direction,t.xaxis,"x"),a.sy=n(t.direction,t.yaxis,"y"),render.rect({element:a.g.selectAll("#"+a.e.attr("id")+"_rect"),data:t.data,attr:{id:function(e){return i.call(t,e),a.e.attr("id")+"_rect"},x:function(e){return t.attr.x(e)},y:function(e){return t.attr.y(e)},width:function(e){return t.attr.width(e)},height:function(e){return t.attr.height(e)}},style:{fill:function(e){return t.style.fill(e)},stroke:function(e){return t.style.stroke(e)}}}),a}}(),config={exclusivity:{},landscape:{}};config.landscape.name=function(t){return t=t.replace(/(_ins|_del)$/gi,"_indel"),t=t.substring(0,1).toUpperCase()+t.substring(1).toLowerCase()},config.landscape.case=function(t){switch(config.landscape.priority(config.landscape.name(t))){case 0:case 1:return"cnv";default:return"var"}},config.landscape.priority=function(t){return{Amplification:0,Homozygous_deletion:1,Nonsense_mutation:2,Splice_site:3,Translation_start_site:4,Missense_mutation:5,Start_codon_snp:5,Nonstop_mutation:6,Frame_shift_indel:7,Stop_codon_indel:7,In_frame_indel:8,Silent:9,Rna:10,Intron:11,"5'utr":11,"3'utr":11,Igr:11}[t]},config.landscape.color=function(t){return{Amplification:"#FFBDE0",Homozygous_deletion:"#BDE0FF",Nonsense_mutation:"#EA3B29",Splice_site:"#800080",Translation_start_site:"#AAA8AA",Missense_mutation:"#3E87C2",Start_codon_snp:"#3E87C2",Nonstop_mutation:"#070078",Frame_shift_indel:"#F68D3B",Stop_codon_indel:"F68D3B",In_frame_indel:"#F2EE7E",Silent:"#5CB755",Rna:"#FFDF97",Intron:"#A9A9A9","5'utr":"#A9A9A9","3'utr":"#A9A9A9",Igr:"#A9A9A9",dead:"#C50E36",alive:"#04CDA4",male:"#0F67B6",female:"E0A4E5",white:"#9CB1CE","black or african american":"#302F24",asian:"#CB771F","american indian or alaska native":"#38120B","hispanic or latino":"#B8642F","not hispanic or latino":"#55C53E","lung acinar adenocarcinoma":"#716190","lung adenocarcinoma mixed subtype":"#5154DE","lung adenocarcinoma- not otherwise specified (nos)":"#8E9A7E","lung bronchioloalveolar carcinoma mucinous":"#2F91DE","lung bronchioloalveolar carcinoma nonmucinous":"#ED6EBD","lung clear cell adenocarcinoma":"#1C8D7A","lung micropapillary adenocarcinoma":"#B2EE86","lung mucinous adenocarcinoma":"#785E54","lung papillary adenocarcinoma":"#69B4C4","lung signet ring adenocarcinoma":"#C1386E","lung solid pattern predominant adenocarcinoma":"#D7A355","mucinous (colloid) carcinoma":"#243833",bronchial:"#F9E3B9","l-lower":"#FBA2A3","l-upper":"#0CA3C7","other (please specify)":"#D3A16C","r-lower":"#388A4E","r-middle":"#D61E43","r-upper":"#B81BCC",no:"#D73A64",yes:"#1990AA","yes, history of prior malignancy":"#3BDB11","yes, history of synchronous/bilateral malignancy":"#803F11",no:"#D73A64",yes:"#1990AA",no:"#D73A64",yes:"#1990AA",t1:"#060CDB",t1a:"#696DE9",t1b:"#CDCEF7",t2:"#F6251D",t2a:"#F96D69",t2b:"#FDCECD",t3:"#1AEB42",t4:"#EBBD34",tx:"#9943DE",n0:"#DC5B35",n1:"#217C1F",n2:"#18A6F3",n3:"#EA68C3",nx:"#F4E831",m0:"#F0820D",m1:"#C45A43",m1a:"#A523C2",m1b:"#C97BDA",mx:"#EDD3F2","stage i":"#01C606","stage ia":"#018404","stage ib":"#002C01","stage ii":"#0E22C3","stage iia":"#08136C","stage iib":"#040B41","stage iiia":"#BB0C2E","stage iiib":"#75081D","stage iv":"#F0CA53",r0:"#DB8EC0",r1:"#FFD046",r2:"#495C50",rx:"#0E5F8A","exon 19 deletion":"#4A312A",l858r:"#74C04C",l861q:"#FBED09",other:"#C91DAB",t790m:"#2C517B",g12a:"#DED0D1",g12c:"#AE8A8E",g12d:"#5D161D",g12s:"#410F14",g12v:"#25080B",other:"#C91DAB","complete remission/response":"#BDED73","partial remission/response":"#8649F3","progressive disease":"#C1746B","stable disease":"#CD4C2A","complete remission/response":"#BDED73","partial remission/response":"#8649F3","progressive disease":"#C1746B","stable disease":"#CD4C2A","Lifelong Non-Smoker":"#C4B5BB","Current Smoker":"#896C78","Current Reformed Smoker for > 15 yrs":"#3B0A1E","Current Reformed Smoker for < or = 15 yrs":"#2F0818","Current Reformed Smoker, Duration Not Specified":"#17040C",NA:"#D6E2E3"}[t]},config.landscape.sample={attr:{x:function(t){return t.x.indexOf("-")>-1?t.sx(t.x):t.sx(t.x)+3},y:function(t){return t.sy(util.minmax(t.dy).max)-t.sy(t.y+t.value)+t.sy(util.minmax(t.dy).min)},width:function(t){return t.x.indexOf("-")>-1?scale.compatibleBand(t.sx):scale.compatibleBand(t.sx)-7.5},height:function(t){return t.sy(t.value)-t.sy(util.minmax(t.dy).min)}},style:{fill:function(t){return config.landscape.color(t.info)},stroke:function(t){return"#FFFFFF"}}},config.landscape.gene={attr:{x:function(t){return t.sx(util.minmax(t.dx).max)-t.sx(t.x+t.value)},y:function(t){return t.sy(t.y)},width:function(t){return t.sx(t.value)},height:function(t){return scale.compatibleBand(t.sy)}},style:{fill:function(t){return config.landscape.color(t.info)},stroke:function(t){return"#FFFFFF"}}},config.landscape.pq={attr:{x:function(t){return t.sx(util.minmax(t.dx).min)},y:function(t){return t.sy(t.y)},width:function(t){return t.sx(t.value)},height:function(t){return scale.compatibleBand(t.sy)}},style:{fill:function(t){return"#BFBFBF"},stroke:function(t){return"#FFFFFF"}}},config.landscape.heatmap={attr:{x:function(t){return this.sx(t.x)},y:function(t){return"cnv"!==config.landscape.case(t.value)?scale.compatibleBand(this.sy)/3+this.sy(t.y):this.sy(t.y)},width:function(t){return scale.compatibleBand(this.sx)},height:function(t){return"cnv"!==config.landscape.case(t.value)?scale.compatibleBand(this.sy)/3:scale.compatibleBand(this.sy)}},style:{fill:function(t){return config.landscape.color(t.value)},stroke:function(t){return"#FFFFFF"}}},config.landscape.group={attr:{x:function(t){return this.sx(t.x)},y:function(t){return this.sy(t.y)},width:function(t){return scale.compatibleBand(this.sx)},height:function(t){return scale.compatibleBand(this.sy)}},style:{fill:function(t){return config.landscape.color(t.value)},stroke:function(t){return"#FFFFFF"}}},config.landscape.legend={attr:{x:function(t,e){var n="h"===this.dr?(2*this.p+this.mw)*e:0;return this.isText?n+2*this.p:n},y:function(t,e){var n=this.height||15,i="h"===this.dr?0:(this.p+this.mh)*e;return this.isText?i+this.mh-this.mh/2+this.p/2:config.landscape.case(t)&&"var"===config.landscape.case(t)?i+n/3:i},width:function(t,e){return this.width||5},height:function(t,e){var n=this.height||15;return config.landscape.case(t)&&"var"===config.landscape.case(t)?n/3:n}},style:{fill:function(t){return config.landscape.color(t)},stroke:function(t){return"#FFFFFF"},fontFamily:function(t){return"Times Roman"},fontSize:function(t){return"12px"}},text:function(t){return t}},config.landscape.axis={sample:{direction:"left",margin:[5,0,10,5],opt:{tickValues:3}},group:{direction:"right",margin:[0,0,0,0],opt:{remove:"line, path"}},gene:[{direction:"right",margin:[5,150,40,0],opt:{remove:"line, path"}},{direction:"bottom",margin:[0,10,35,71],opt:{tickValues:3}}],pq:{direction:"bottom",margin:[0,10,35,20],opt:{tickValues:3}}},config.landscape.bar={pq:{direction:"right",margin:[5,10,41,30],xaxis:function(){return this.pq.x},yaxis:function(){return this.pq.y},attr:config.landscape.pq.attr,style:config.landscape.pq.style}},config.landscape.stack={patient:{direction:"top",margin:[5,0,10,0],xaxis:function(){return this.patient.x},yaxis:function(){return this.sample.y},attr:config.landscape.sample.attr,style:config.landscape.sample.style},sample:{direction:"top",margin:[5,1,10,1],xaxis:function(){return this.sample.x},yaxis:function(){return this.sample.y},attr:config.landscape.sample.attr,style:config.landscape.sample.style},gene:{direction:"left",margin:[5,10,41,70],xaxis:function(){return this.gene.x},yaxis:function(){return this.gene.y},attr:config.landscape.gene.attr,style:config.landscape.gene.style}},config.landscape.heatmap={heatmap:{direction:"left",margin:[5,1,41,1],opt:{},xaxis:function(){return this.sample.x},yaxis:function(){return this.gene.y},attr:config.landscape.heatmap.attr,style:config.landscape.heatmap.style},patient:{direction:"left",margin:[5,1,41,3.5],opt:{},xaxis:function(){return this.patient.x},yaxis:function(){return this.gene.y},attr:config.landscape.heatmap.attr,style:config.landscape.heatmap.style}},config.landscape.group={group:{direction:"left",margin:[2,1,4,1],opt:{},xaxis:function(){return this.sample.x},attr:config.landscape.group.attr,style:config.landscape.group.style},patient:{direction:"left",margin:[2,1,4,4],opt:{},xaxis:function(){return this.patient.x},attr:config.landscape.group.attr,style:config.landscape.group.style}},config.exclusivity.separate=function(t){return"B"===t?["A","M"]:"E"===t?["D","E"]:"M"===t?[".","M"]:[t]},config.exclusivity.name=function(t){return{A:"Amplification",D:"Deletion",M:"Mutation",".":"None"}[t]},config.exclusivity.priority=function(t){return{Amplification:0,Deletion:1,Mutation:2,None:3}[t]},config.exclusivity.color=function(t){return{Amplification:"#FFBDE0",Deletion:"#BDE0FF",Mutation:"#5CB755",None:"#D3D3D3"}[t]},config.exclusivity.legend={margin:[30,80,0,0],attr:{x:function(t,e){var n="h"===this.dr?(10*this.p+this.mw)*e:0;return this.isText?n+2*this.p:n},y:function(t,e){var n=this.height||15,i="h"===this.dr?0:(this.p+this.mh)*e;return this.isText?i+this.mh-this.mh/2+this.p/2:"Mutation"===t?i+n/3:i},width:function(t,e){return this.width||5},height:function(t,e){var n=this.height||15;return"Mutation"===t?n/3:n}},style:{fill:function(t){return config.exclusivity.color(t)},fontSize:function(t){return"12px"},fontFamily:function(t){return"Times Roman"}},text:function(t){return t}},config.exclusivity.heatmap={margin:[35,40,35,50],attr:{x:function(t){return this.sx(t.x)},y:function(t){return"Mutation"===t.value?this.sy(t.y)+scale.compatibleBand(this.sy)/3:this.sy(t.y)},width:function(t){return scale.compatibleBand(this.sx)},height:function(t){return"Mutation"===t.value?scale.compatibleBand(this.sy)/3:scale.compatibleBand(this.sy)}},style:{fill:function(t){return config.exclusivity.color(t.value)},stroke:function(t){return"#FFFFFF"}}},config.exclusivity.division={margin:[11,40,0,48],dashed:"4, 5",attr:{x:function(t){return this.sx?this.sx(t.value):0},y:function(t){return this.sy?this.sy(t.value):0},width:function(t){return"h"===this.direction?t.size:this.w},height:function(t){return"h"!==this.direction?t.size:this.h}},style:{fill:function(t,e){return t.color},stroke:function(t,e){return"#FFFFFF"}}};var divisionLine=function(t){"use strict";function e(){return{first:n[n.sw](n.point)-n[n.sw](n.a[0]),last:n[n.sw](n.a[n.a.length-1])-n[n.sw](n.point)}}var n={};return function(t){(n={}).e=t.element="Object"===util.varType(t.element)?t.element:/\W/.test(t.element[0])?d3.select(t.element):d3.select("#"+t.element),n.e=util.d3v4()?n.e:n.e[0][0],n.m=size.setMargin(t.margin),n.s=draw.size(n.e),n.t=n.m.top||0,n.l=n.m.left||0,n.direction=t.direction||"h",n.point=t.point||0,n.a=t.axis,n.sw="s"+("h"===n.direction?"x":"y"),n[n.sw]=scale.get(t.axis,"h"===n.direction?[n.m.left,n.s.w-n.m.right]:[n.m.top,n.s.h-n.m.bottom]),n.g=render.addGroup(n.e,n.t,n.l),n.lg=render.addGroup(n.e,n.t,n.l),n.h=t.height||30,n.w=t.width||30,n.line=d3.line().x(function(t){return t.x}).y(function(t){return t.y});var i=e();render.rect({element:n.g.selectAll("#"+n.e.attr("id")+"_div"),data:[{value:t.axis[0],color:t.color[0],size:i.first},{value:t.point,color:t.color[1],size:i.last}],attr:{id:function(t){return n.e.attr("id")+"_div"},x:function(e){return t.attr.x?t.attr.x.call(n,e):0},y:function(e){return t.attr.y?t.attr.y.call(n,e):0},width:function(e){return t.attr.width?t.attr.width.call(n,e):n.w},height:function(e){return t.attr.height?t.attr.height.call(n,e):n.h},rx:5,ry:5},style:{fill:function(e,i){return t.style.fill?t.style.fill.call(n,e,i):"#000000"},stroke:function(e,i){return t.style.stroke?t.style.stroke.call(n,e,i):"#FFFFFF"}}}),render.text({element:n.g.selectAll("#"+n.e.attr("id")+"_text"),data:[{text:t.text[0]},{text:t.text[1]}],attr:{id:n.e.attr("id")+"_text",x:function(t,e){var i=draw.getTextWidth(t.text,"16px");return"h"===n.direction?0===e?n.m.left+5:n.s.w-n.m.right-1.8*i:n.w/2-i/2},y:function(t,e){return n.h-5}},style:{fill:"#FFFFFF","font-size":"16px","font-weight":"bold","text-shadow":"1px 1px rgba(0, 0, 0, 0.5)"},text:function(t){return t.text}}),render.line({element:n.lg,attr:{id:function(t){return n.e.attr("id")+"_line"},d:n.line([{x:n[n.sw](n.point),y:n.h},{x:n[n.sw](n.point),y:n.s.h}]),"stroke-dasharray":t.dashed||"0","stroke-width":.8},style:{stroke:"#000000"}})}}(),draw=function(t){"use strict";function e(t,e){var n=document.createElement("input");return n.id=t,n.name="tabs",n.type="radio",n.checked=0===e,n}function n(t,e){var n=document.createElement("label");return n.htmlFor=t,n.innerHTML=e,n}function i(t,e){var n=document.createElement("div");return n.id=t+"_content",n}return t.ctx=null,t.clearCanvas=function(t){t.children.length>0&&t.removeChild(t.firstChild)},t.width=function(t){return"string"==typeof t?parseFloat(document.querySelector(t)):parseFloat(t.style.width)},t.height=function(t){return"string"==typeof t?parseFloat(document.querySelector(t)):parseFloat(t.style.height)},t.getTextWidth=function(t,e){var n=document.createElement("canvas"),i=n.getContext("2d"),a=0;return n.id="get-text-width",i.font=e||"10px Arial",document.body.appendChild(n),a=i.measureText(t).width,document.body.removeChild(document.getElementById("get-text-width")),a},t.getTextHeight=function(t,e){var n=document.createElement("span"),i=document.createElement("div"),a=document.createElement("div");a.id="get_text_height",n.style.fontSize=t||"10px",n.style.fontStyle=e||"Arial",n.innerHTML="Hg",i.style.display="inline-block",i.style.width="1px",i.style.height="0px",a.appendChild(n),a.appendChild(i),document.querySelector("body").appendChild(a);try{var r={};i.style.verticalAlign="baseline",r.ascent=i.offsetTop-n.offsetTop,i.style.verticalAlign="bottom",r.height=i.offsetTop-n.offsetTop,r.descent=r.height-r.ascent}finally{a.parentNode.removeChild(document.getElementById("get_text_height"))}return r},t.randomDraw=function(t,e){return Math.floor(Math.random()*t)+(e||0)},t.getDegree=function(t,e,n,i){var a=n-t,r=i-e,o=Math.atan2(a,r);return{radian:o,degree:Math.floor(180*o/Math.PI)}},t.noOverlap=function(e,n,i){for(var a=n.filter(function(t){return"node"===t.type}),r=n.filter(function(t){return"edge"===t.type}),o=0,l=a.length;o<l;o++){var s=a[o];s.textWidth=t.getTextWidth(e,"14px Calibri",s.text),s.width=s.width||1.2*s.textWidth,s.height=s.height||24,s.radius=5,i&&(s.top=i.members.indexOf(s.text)>-1?t.randomDraw(i.top+s.height/2,.7*i.height-s.height/2):(i.top-0)/2-s.height/2,s.left=t.randomDraw(i.left+i.width-i.left-s.width,i.left)),r.forEach(function(t){t.source=t.source.substring(0,s.text.length)===s.text?s.text:t.source,t.target=t.target.substring(0,s.text.length)===s.text?s.text:t.target,t.id=t.id.substring(0,t.source.length+t.target.length)})}return n},t.tab=function(t,a,r){var o=document.querySelector(t);if(a.length!==r.length)throw new Error("탭 제목과 ID 의 길이가 같지 않습니다.");for(var l=0,s=a.length;l<s;l++){var c=a[l],u=r[l];o.appendChild(e(u,l)),o.appendChild(n(u,c))}for(var l=0,s=a.length;l<s;l++){var d=i(r[l]);d.appendChild(i(r[l]+"_chart")),d.appendChild(i(r[l]+"_table")),o.appendChild(d)}},t.size=function(t){return t=util.d3v4()?t:t[0][0],{w:t.attr("width"),h:t.attr("height")}},t}(draw||{}),eventHandler=function(t){"use strict";function e(t){function e(e){t({x:e.pageX-n.ctx.canvas.offsetLeft,y:e.pageY-n.ctx.canvas.offsetTop})}if(!n.ctx)throw new Error("Not found context of canvas.");n.ctx.canvas.removeEventListener("mousemove",e),n.ctx.canvas.addEventListener("mousemove",e)}var n={};return t.context=function(e){return n.ctx=e,arguments.length?t:n.ctx},t.data=function(e){return n.data=e,arguments.length?t:n.data},t.hover=function(t){e(function(t){})},t.onScroll=function(t,e){(t="object"==typeof t?t:document.querySelector(t)).addEventListener("scroll",e)},t}(eventHandler||{}),exclusive=function(){"use strict";function t(){network({data:o.data.network[o.nowSet],element:"#exclusivity_network"})}function e(){layout.getSVG(o.svg,["heatmap"],function(t,e){axis.element(e).left({margin:[35,0,35,e.attr("width")-80],data:o.nowSet.split(" "),opt:{remove:"line, path"}}).attr("id","exclusivity_heatmap_axis")})}function n(){layout.getSVG(o.svg,["heatmap"],function(t,e){heatmap({element:e,data:o.data.heatmap[o.nowSet],opt:config.exclusivity.heatmap.opt,attr:config.exclusivity.heatmap.attr,style:config.exclusivity.heatmap.style,margin:config.exclusivity.heatmap.margin,xaxis:o.data.axis.heatmap.x[o.nowSet],yaxis:o.data.axis.heatmap.y[o.nowSet]})})}function i(){layout.getSVG(o.svg,["heatmap"],function(t,e){divisionLine({element:e,height:45,direction:"h",color:["#FF6252","#00AC52"],attr:config.exclusivity.division.attr,style:config.exclusivity.division.style,text:["Altered group","Unaltered group"],margin:config.exclusivity.division.margin,axis:o.data.axis.heatmap.x[o.nowSet],point:""+o.data.divisionIdx[o.nowSet].idx,dashed:config.exclusivity.division.dashed})})}function a(){layout.getSVG(o.svg,["legend"],function(t,e){legend({element:e,data:o.data.legend[o.nowSet],priority:config.exclusivity.priority,text:config.exclusivity.legend.text,attr:config.exclusivity.legend.attr,style:config.exclusivity.legend.style,margin:config.exclusivity.legend.margin})})}function r(){t(),e(),n(),i(),a()}var o={};return function(t){console.log("Given Exclusivity data: ",t);var e=document.querySelector(t.element||null),n=parseFloat(t.width||e.style.width||1400),i=parseFloat(t.height||e.style.height||700);o.origin=t.data,o.data=preprocessing.exclusivity(t.data),o.ids=size.chart.exclusivity(e,n,i),o.svg=layout.exclusivity(o.ids,o),o.nowSet=selectGeneSet.set({element:"#exclusivity_select_geneset",data:o.data.geneset,change:function(t){o.nowSet=this.value,layout.removeG(),r()}}),r(),console.log("Exclusivity Model data: ",o)}}(),force=function(t){return t.setConstant=function(e){return t.constant=e||50,model},t.getConstant=function(){return t.constant||50},t.getKvalue=function(e,n){var i=t.getConstant();return Math.sqrt(e*n)/i},t.aForce=function(t,e){return e*e/t},t.rForce=function(t,e){return t*t/e},t}(force||{}),heatmap=function(t){"use strict";function e(t){util.loop(t,function(t,e){util.loop(i.mt,function(t,n){e[t][0]&&i.d.push({x:e.x,y:e.y,value:e[t][0]})})})}function n(t){return util.loopArr(t,function(t,e){var n=t.x+t.y,a=config.landscape.case(t.value);i.v[n]?config.landscape.priority(i.v[n][a][0])>config.landscape.priority(t.value)?i.v[n][a].unshift(t.value):i.v[n][a].push(t.value):(i.v[n]={cnv:[],var:[],x:t.x,y:t.y},i.v[n][a].push(t.value))}),e(i.v)}var i={mt:["cnv","var"],v:{},d:[]};return function(t){return i.e={},i.e=t.element="Object"===util.varType(t.element)?t.element:/\W/.test(t.element[0])?d3.select(t.element):d3.select("#"+t.element),i.e=util.d3v4()?i.e:i.e[0][0],i.s=draw.size(i.e),i.m=size.setMargin(t.margin),i.t=i.m.top||0,i.l=i.m.left||0,i.g=render.addGroup(i.e,i.t,i.l),i.sx=scale.get(t.xaxis,[i.m.left,(t.width||i.s.w)-i.m.right]),i.sy=scale.get(t.yaxis,[i.m.top,(t.height||i.s.h)-i.m.bottom]),render.rect({element:i.g.selectAll("#"+i.e.attr("id")+"_rect"),data:t.dup?(n(t.data),i.d):t.data,attr:{id:function(t){return i.e.attr("id")+"_rect"},x:function(e){return t.attr.x.call(i,e)},y:function(e){return t.attr.y.call(i,e)},width:function(e){return t.attr.width.call(i,e)},height:function(e){return t.attr.height.call(i,e)}},style:{fill:function(e){return t.style.fill(e)},stroke:function(e){return t.style.stroke(e)}}}),i}}(),landscape=function(t){"use strict";function e(){_.div.title=document.querySelector("#landscape_title"),_.div.title.innerHTML=_.origin.title}function n(t,e,n){var i=document.createElement("div");_.ids.push((i.id=t.id+"_"+e,i.id)),util.loop(n,function(t,e){i.style[t]=e}),t.appendChild(i)}function i(t){var e={_patient:document.getElementById("landscape_patient_group"),_axis:document.getElementById("landscape_axis_group"),_chart:document.getElementById("landscape_group")};util.loop(e,function(e,i){util.loop(t,function(a,r){n(i,util.removeWhiteSpace(a[0])+e,{width:draw.width(i)+"px",height:draw.height(i)/t.length+"px",overflowX:"hidden",overflowY:"hidden"})})})}function a(t,e,n,i){var a=!1;util.loop(t.split("_"),function(t,r){config.landscape[e][t]&&(a||(a=!0,i(config.landscape[e][t],n[t])))})}function r(t,e){return a(t,"axis",_.data.axis,e)}function o(t,e){return a(t,"bar",_.data,e)}function l(t,e){return a(t,"stack",_.data.stack,e)}function s(t,e){return a(t,"group",_.data.group,e)}function c(t,e){var n;return t.indexOf("group")<0?e:(t.split("_").forEach(function(t){util.loop(e,function(e,i){t===e[0].replace(/\s/gi,"")&&(n=e)})}),n)}function u(t,e){var n;return util.loop(e,function(e,i){var a=(e.y||e[0].y).replace(/\s/gi,"");t.indexOf(a)>-1&&(n="Array"===util.varType(e)?e:[e])}),n}function d(){layout.getSVG(_.svg,["axis_sample","gene","pq","axis_group_"],function(t,e){r(t,function(t,n){t="Array"!==util.varType(t)?[t]:t,util.loop(t,function(t,i){axis.element(e)[t.direction]({margin:t.margin,data:c(e.attr("id"),"top"===t.direction||"bottom"===t.direction?n.x:n.y),opt:t.opt})})})})}function p(t,e,n,i){bar({data:e,opt:t.opt,element:n,attr:t.attr,style:t.style,margin:t.margin,direction:t.direction,width:i.indexOf("patient")<0&&i.indexOf("sample")>-1?_.nowWidth||_.initWidth:null,xaxis:t.xaxis.call(_.data.axis),yaxis:t.yaxis.call(_.data.axis)})}function f(){layout.getSVG(_.svg,["pq"],function(t,e){o(t,function(n,i){p(n,i,e,t)})})}function h(){layout.getSVG(_.svg,["e_sample","patient_sample","gene"],function(t,e){l(t,function(n,i){p(n,i,e,t)})})}function g(){layout.getSVG(_.svg,["t_group_","e_group_"],function(t,e){s(t,function(n,i){heatmap({element:e,opt:n.opt,attr:n.attr,style:n.style,margin:n.margin,data:u(t,i),width:t.indexOf("patient")<0?_.nowWidth||_.initWidth:null,xaxis:n.xaxis.call(_.data.axis),yaxis:_.data.axis.group.y.filter(function(e,n){if(t.indexOf(e[0].replace(/\s/gi,""))>-1)return e})[0]})})})}function m(){layout.getSVG(_.svg,["legend"],function(t,e){legend({element:e,data:_.data.type,priority:config.landscape.priority,text:config.landscape.legend.text,attr:config.landscape.legend.attr,style:config.landscape.legend.style,margin:[e.attr("height")/3,20,0,0]})})}function x(){_.initWidth=2*draw.width(d3.select("#landscape_heatmap").node()),_.initHeight=draw.height(d3.select("#landscape_heatmap").node())}function y(){scaleOption.set({element:"#landscape_option",default:100,defaultValue:_.initWidth,interval:10,unit:"%",btn:[{id:"upscale",className:"upscale"},{id:"downscale",className:"downscale"},{id:"initialize",className:"initialize"}],input:{id:"viewscale",className:"viewscale"},change:function(t,e){layout.removeG(),b(_.data,(_.nowWidth=e,_.nowWidth))}})}function v(){sortOption.set({element:"#landscape_option",subject:["Mutation","Value","Sample"],itemClick:function(t){console.log("dd")}})}function w(t){layout.getSVG(_.svg,["e_group_","e_sample","e_heatmap"],function(e,n){n.attr("width",t||_.nowWidth||_.initWidth)})}function b(t,e){w(e),d(),h(),f(),g(),m()}var _={div:{}};return function(t){console.log("Given Landscape data: ",t);var n=document.querySelector(t.element||null),a=parseFloat(t.width||n.style.width||1400),r=parseFloat(t.height||n.style.height||700);_.origin=t.data,_.data=preprocessing.landscape(t.data),_.ids=size.chart.landscape(n,a,r),x(),e(),y(),v(),i(_.data.axis.group.y),_.svg=layout.landscape(_.ids,_),b(_.data,_.initWidth),console.log("Landscape Model data: ",_),eventHandler.onScroll("#landscape_heatmap",function(t){var e=document.querySelector("#landscape_sample"),n=document.querySelector("#landscape_group").children,i=this;e.scrollLeft=i.scrollLeft,util.loop(n,function(t,e){t.scrollLeft=i.scrollLeft})})}}(),layout=function(t){"use strict";var e={exclusivity:{},landscape:{}};return t.getSVG=function(t,e,n){util.loop(t,function(t,i){util.loop(e,function(e,a){if(t.indexOf(e)>-1)return n(t,i)})})},t.removeG=function(){d3.selectAll("svg .g-tag").remove()},t.exclusivity=function(t,n){return util.loop(t,function(t,n){t.indexOf("geneset")<0&&t.indexOf("survival")<0&&t.indexOf("network")<0&&(e.exclusivity[t]=render.createSVG(t))}),e.exclusivity},t.landscape=function(t,n){return util.loop(t,function(t,n){t.indexOf("option")<0&&t.indexOf("title")<0&&(e.landscape[t]=render.createSVG(t))}),e.landscape},t}(layout||{}),legend=function(t){"use strict";function e(t,e){var n=0;return util.loop(t,function(t,i){n=n>draw.getTextWidth(t,e)?n:draw.getTextWidth(t,e)}),n}var n={};return function(t){(n={}).d=t.data.sort(function(e,n){return t.priority(e)>t.priority(n)?1:-1}),n.e=t.element="Object"===util.varType(t.element)?t.element:/\W/.test(t.element[0])?d3.select(t.element):d3.select("#"+t.element),n.e=util.d3v4()?n.e:n.e[0][0],n.m=size.setMargin(t.margin),n.w=n.e.attr("width"),n.h=n.e.attr("height"),n.t=n.m.top||0,n.l=n.m.left||0,n.p=t.padding||5,n.sw=n.sg=render.addGroup(n.e,n.t,n.l),n.tg=render.addGroup(n.e,n.t,n.l),n.mw=e(n.d,"10px Arial"),n.mh=draw.getTextHeight("10px Arial").height,n.dr=n.w-n.m.left-n.m.right>n.h-n.m.top-n.m.bottom?"h":"v",render.rect({element:n.sg.selectAll("#"+n.e.attr("id")+"_rect"),data:n.d,attr:{id:function(t){return n.e.attr("id")+"_rect"},x:function(e,i){return t.attr.x?t.attr.x.call(n,e,i):0},y:function(e,i){return t.attr.y?t.attr.y.call(n,e,i):0},width:function(e,i){return t.attr.width?t.attr.width.call(n,e,i):5},height:function(e,i){return t.attr.height?t.attr.height.call(n,e,i):5}},style:{fill:function(e){return t.style.fill?t.style.fill(e):"#000000"},stroke:function(e){return!!t.style.stroke&&t.style.stroke(e)}}}),render.text({element:n.tg.selectAll("#"+n.e.attr("id")+"_text"),data:n.d,attr:{id:function(t){return n.isText=!0,n.e.attr("id")+"_text"},x:function(e,i){return t.attr.x?t.attr.x.call(n,e,i):0},y:function(e,i){return t.attr.y?t.attr.y.call(n,e,i):0}},style:{"font-size":function(e){return t.style.fontSize?t.style.fontSize(e):"10px"},"font-family":function(e){return t.style.fontFamily?t.style.fontFamily(e):"Arial"}},text:function(e,i){return t.text(e,i,n)||"legend"+i}})}}();!function(t){"use strict";t.bio={draw:draw,config:config,render:render,variants:variants,pathways:"",expression:"",landscape:landscape,exclusive:exclusive,chart:{bar:bar,legend:legend,needle:"",graph:"",procbar:"",network:network,heatmap:heatmap,survival:survival},tools:{sortOption:sortOption,scaleOption:scaleOption,divisionLine:divisionLine,selectGeneSet:selectGeneSet},util:util,size:size,scale:scale,layout:layout,eventHandler:eventHandler,preprocessing:preprocessing}}(window||{});var network=function(){"use strict";return function(t){var e=[],n={},i="";t.data.map(function(t){if("compound"===t.type)i=t.members,e.push({group:"nodes",data:{id:"n0",bgcolor:t.bgcolor,bdcolor:t.bordercolor||"rgb(0, 0, 0)",width:100,height:100,isComp:!0,per:t.text},position:{}});else if("node"===t.type){var a={data:{id:i.indexOf(t.text)>-1?"n0:"+t.text:t.text,name:t.text,bgcolor:t.bgcolor,bdcolor:t.bordercolor||"rgb(0, 0, 0)",width:draw.getTextWidth(t.text,"14px Calibri"),height:15,isComp:!1},group:"nodes"};n[t.text]={parent:i.indexOf(t.text)>-1?"n0:":""},i.indexOf(t.text)>-1&&(a.data.parent="n0"),e.push(a)}else if("edge"===t.type){var r="",o="",l="";for(var s in n)t.source.substring(0,s.length)===s&&(r=n[s].parent+s,l=t.source.substring(s.length,t.source.length),o=n[t.target.substring(0,t.target.indexOf(l))].parent+t.target.substring(0,t.target.indexOf(l)));e.push({data:{id:r+o,source:r,target:o,color:t.linecolor},group:"edges"})}});cytoscape({container:document.querySelector(t.element),boxSelectionEnabled:!1,autoungrabify:!0,autounselectify:!0,pixelRatio:"auto",elements:e,style:cytoscape.stylesheet().selector("node").css({shape:"rectangle",width:"data(width)",height:"data(height)","font-size":"10",content:"data(name)","text-valign":"center","background-color":"data(bgcolor)","border-color":"data(bdcolor)","border-width":"1"}).selector(":parent").css({"background-color":"rgba(255, 255, 255, 0.5)","border-color":"rgb(150, 0, 0)","border-width":"1",content:"data(per)","font-size":"12","text-valign":"top"}).selector("edge").css({"curve-style":"bezier","target-arrow-shape":"triangle","target-arrow-color":"data(color)","arrow-scale":"1","line-color":"data(color)"}),layout:{name:"cose-bilkent",animate:!1}})}}(),preprocessing=function(t){"use strict";function e(t){return/[\[][\w(\s|,)]+[\]]/.exec(t)[0].replace(/\[|\]/g,"").split(" ")}function n(t){return"rgb("+t.split(" ").join(",")+")"}function i(t){var e=[];return util.loop(t,function(t,i){var a={};util.loop(t.split("\t"),function(t,e){a[t.split(":")[0]]=t.split(":")[0].indexOf("color")<0?t.split(":")[1]:n(t.split(":")[1])}),e.push(a)}),e}function a(t){util.loop(t,function(t,e){A.network[t]=i(e)})}function r(t){var e={};util.loop(t.split("\n"),function(t,n){util.loop(A.geneset,function(n,i){t.indexOf(n.join(""))>-1&&(e[n.join(" ")]?e[n.join(" ")].push(t):e[n.join(" ")]=[t])})}),a(e)}function o(t){return A.legend[t.join(" ")]=[]}function l(t,e,n,i,a,r,o){util.loop(e.split(""),function(e,l){a.push(""+l),r.push(""+l),util.loop(config.exclusivity.separate(e),function(e,a){e=config.exclusivity.name(e),n.push({x:l,y:t,value:e}),i.indexOf(e)<0?i.push(e):i=i}),o.idx="."!==e?o.idx>l?o.idx:l:o.idx})}function s(t,e,n){var i=o(e);util.loop(t,function(t,a){util.loop(e,function(a,r){if(t.indexOf(a)>-1){var o=e.join(" ");A.axis.heatmap.x[o]=[],A.axis.heatmap.y[o]=e,A.axis.division.x[o]=[],A.divisionIdx[o]={idx:0},l(a,t.substring(0,t.indexOf(" ")),n,i,A.axis.heatmap.x[o],A.axis.division.x[o],A.divisionIdx[o])}})})}function c(t){util.loop(t.split("\n\n"),function(t,n){if(""!==t){var i=e(t),a=t.split("\n");s(a.splice(1,a.length),i,A.heatmap[i.join(" ")]=[]);A.geneset.push(i)}})}function u(t){k.type[t]||(k.type[t]=null)}function d(t){t[k.keys.t]=S.name(t[k.keys.t])}function p(t,e,n,i,a){return"gene"===t?{x:e,y:n,value:i,info:a}:{x:n,y:e,value:i,info:a}}function f(t,e){var n=[];return util.loop(e,function(e,i){var a=0,r=0;util.loop(i,function(i,o){n.push(p(t,a,e,o,i)),a+=o,r+=o}),k.axis[t]["gene"===t?"x":"y"].push(r)}),n}function h(t,e,n){t[e]=t[e]?t[e]:{},t[e][n]=t[e][n]?t[e][n]+1:1}function g(t,e){t.push({x:e[k.keys.p],y:e[k.keys.g],value:e[k.keys.t]})}function m(t,e){util.loop(t,function(t,n){d(t),u(t[k.keys.t]),e(t,n)})}function x(t){m(t,function(t,e){h(k.stack.gene,t[k.keys.g],t[k.keys.t]),h(k.stack.sample,t[k.keys.p],t[k.keys.t]),g(k.heatmap,t),k.axis.sample.x.indexOf(t[k.keys.p])<0&&k.axis.sample.x.push(t[k.keys.p])})}function y(t){m(t,function(t,e){h(k.stack.patient,t[k.keys.p],t[k.keys.t]),g(k.patient,t),k.axis.patient.x.indexOf(t[k.keys.p])<0&&k.axis.patient.x.push(t[k.keys.p])})}function v(t){return Math.log(t)/Math.log(12)*-1}function w(t,e){var n=[];return util.loop(t,function(t,i){n.push({x:0,y:t[k.keys.g],value:v(t[e])})}),n}function b(t){util.loop(t,function(t,e){var n=[];util.loop(t.data,function(e,i){n.push({x:e[k.keys.p],y:t.name,value:e.value})}),k.group.group.push(n),k.axis.group.y.push([t.name]),k.group.patient.push({x:k.axis.patient.x[0],y:t.name,value:"NA"})})}function _(){k.axis.gene.x=[util.minmax(k.axis.gene.x).max,0],k.axis.sample.y=[util.minmax(k.axis.sample.y).max,0],k.axis.pq.x=[0,util.minmax(k.pq.map(function(t){return Math.ceil(t.value)})).max]}function F(){k.axis.pq.y=k.gene,k.axis.gene.y=k.gene,k.axis.heatmap.y=k.gene,k.axis.heatmap.x=k.axis.sample.x,k.axis.group.x=k.axis.sample.x}function C(t,e){var n={};return util.loop(e,function(e,i){t.indexOf(i)>-1?n.g=e:S.color(S.name(i))?n.t=e:n.p=e}),n}var E={exclusivity:{heatmap:{},network:{},legend:{},mutual:{},geneset:[],axis:{heatmap:{x:{},y:{}},division:{x:{},y:[]}},divisionIdx:{}},landscape:{keys:{},type:{},group:{group:[],patient:[]},heatmap:[],patient:[],stack:{gene:{},sample:{},patient:{}},axis:{pq:{x:[],y:[]},gene:{x:[],y:[]},group:{x:[],y:[]},sample:{x:[],y:[]},heatmap:{x:[],y:[]},patient:{x:[],y:[]}}}},k=E.landscape,A=E.exclusivity,S=config.landscape;return t.exclusivity=function(t){return c(t.heatmap),r(t.network),console.log("Preprocess of Exclusivity: ",A),A},t.landscape=function(t){return k.gene=t.gene,k.keys=C(k.gene,t.mutation.concat(t.patient)[0]),x(t.mutation),y(t.patient),b(t.group),k.type=util.keyToArr(k.type),k.pq=w(t.pq,t.pqValue||"p"),k.stack.gene=f("gene",k.stack.gene),k.stack.sample=f("sample",k.stack.sample),k.stack.patient=f("patient",k.stack.patient),_(),F(),console.log("Preprocess of Landscape: ",k),k},t}(preprocessing||{}),render=function(t){"use strict";function e(t,e){for(var n in e)t.attr(n,e[n])}function n(t,e){for(var n in e)t.style(n,e[n])}function i(t,e){t.text(e)}function a(t){var a=this.element.data(this.data).enter().append(t);!!this.text&&i(a,this.text),e(a,this.attr),n(a,this.style)}return t.createSVG=function(t,e,n){var t=t.indexOf("#")<0?"#"+t:t,i=document.querySelector(t);return d3.select(t).append("svg").attr("id",t.replace("#","")+"_chart").attr("width",(e||parseFloat(i.style.width))+1).attr("height",n||parseFloat(i.style.height))},t.addGroup=function(t,e,n){return(t=util.d3v4()?t:t[0][0]).append("g").attr("class",t.attr("id")+" g-tag").attr("transform","translate("+n+", "+e+")")},t.rect=function(t){a.call(t,"rect")},t.text=function(t){a.call(t,"text")},t.line=function(t){var i=t.element.append("path");e(i,t.attr),n(i,t.style)},t}(render||{}),scale=function(t){"use strict";function e(t,e){var n=[];if("number"==typeof e[0]&&"number"==typeof e[1]){for(var a=Math.max(e[0],e[1]),r=Math.min(e[0],e[1]),o=a+r-r,l=r;l<=o;l++)n.push(l);return i.data.push(n),i.len.push(o),"ordinal"===t?n:[e[0],e[1]]}return i.data.push(e),i.len.push(e.length),e}function n(t){return"String"===util.varType(t[0])?"ordinal":"linear"}var i={data:[],len:[]};return t.ordinal=function(t,n){var i=e("ordinal",t);return d3.scaleBand?d3.scaleBand().domain(i).range(n):d3.scale.ordinal().domain(i).rangeBands(n)},t.linear=function(t,n){var i=e("linear",t);return d3.scaleLinear?d3.scaleLinear().domain(i).range(n):d3.scale.linear().domain(i).range(n)},t.getType=function(t){return"number"==typeof t[0]?"linear":"ordinal"},t.compatibleBand=function(t){return t.bandwidth?t.bandwidth():t.rangeBand()},t.getDomain=function(){return i.data.shift()},t.getDomainLength=function(){return i.len.shift()},t.getDistance=function(e){return"ordinal"===e?t.compatibleBand():t(1)-t(0)},t.get=function(e,i){return t[n(e)](e,i)},t}(scale||{}),scaleOption=function(t){"use strict";function e(t){return{upscale:"fa fa-caret-up",downscale:"fa fa-caret-down",initialize:"fa fa-refresh"}[t]}function n(t){var e=document.querySelector("#viewscale");switch(this.id){case"upscale":r.status+=r.interval;break;case"downscale":r.status-=r.interval;break;case"initialize":r.status=r.default;break;default:return}var n="upscale"===this.id?1:-1,i=parseInt(.1*r.defaultValue);r.status=r.status<r.default?r.default:r.status>200?200:r.status,e.value=r.status+" %",r.nowValue="initialize"===this.id?r.defaultValue:(this.id,r.nowValue+n*i),r.nowValue=r.defaultValue>r.nowValue?r.defaultValue:2*r.defaultValue<r.nowValue?2*r.defaultValue:r.nowValue,!!r.change&&r.change(this.id,r.nowValue)}function i(t,i){for(var a=0,r=i.btn.length;a<r;a++){var o=i.btn[a],l=document.createElement("button"),s=document.createElement("i");s.className=e(o.id),l.id=o.id,l.addEventListener("click",n),l.appendChild(s),t.appendChild(l)}}function a(t,e){util.loop(e.input,function(e,n){var i=document.createElement("input");i.id=e.id,i.readOnly=!0,i.tabIndex=-1,i.value=(r.value||r.default)+" "+r.unit,t.appendChild(i)})}var r={};return t.set=function(e){if(d3.select(".scale-option-frame").empty()){var n=document.createElement("div");n.className="scale-option-frame",(r=e).status=e.default,r.e=document.querySelector(e.element),r.width=parseFloat(e.width||r.e.style.width||140),r.height=parseFloat(e.height||r.e.style.height||105),r.change=e.change||null,r.defaultValue=e.defaultValue,r.nowValue=r.defaultValue,r.e.appendChild(n),e.btn=e.btn.length?e.btn:[e.btn],e.input=e.input.length?e.input:[e.input],a(n,e),i(n,e)}return t},t.change=function(e){return e(r),t},t}(scaleOption||{}),selectGeneSet=function(t){"use strict";function e(){a.l=document.createElement("label")}function n(t){a.s=document.createElement("select"),a.s.id=t.replace("#","")+"_view",a.l.appendChild(a.s)}function i(t){util.loop(t,function(t,e){var n=document.createElement("option"),i=t.join(" ");n.text=i,n.value=i,a.s.options.add(n)})}var a={};return t.set=function(t){var r=document.querySelector(t.element);return e(),n(t.element),i(t.data),a.s.onchange=t.change||null,r.appendChild(a.l),a.s.value},t}(selectGeneSet||{}),size=function(t){"use strict";function e(t){util.loop.call(this,t,function(t,e){var i=document.createElement("div");i.id=t,i.style.width=e.w+"px",i.style.height=e.h+"px",n.ids.push(t),this.appendChild(i)})}var n={ids:[]};return t.chart={},t.setMargin=function(t){if(!t.length)return{top:t,left:t,bottom:t,right:t};if("[object Object]"===Object.prototype.toString.call(t))return t;switch(t.length){case 1:return{top:t[0],left:t[0],bottom:t[0],right:t[0]};case 2:return{top:t[0],left:t[1],bottom:t[0],right:t[1]};case 3:return{top:t[0],left:t[1],bottom:t[2],right:t[1]};case 4:default:return{top:t[0],left:t[1],bottom:t[2],right:t[3]}}},t.setSize=function(t,e,n){return t.style.width=e+"px",t.style.height=n+"px",t},t.chart.exclusivity=function(i,a,r){var o={exclusivity_survival:{w:.3*a,h:.85*r},exclusivity_group:{w:.7*a,h:.25*r},exclusivity_select_geneset:{w:.7*a*.3,h:.1*r},exclusivity_heatmap:{w:.7*a*.7,h:.5*r},exclusivity_network:{w:.7*a*.3,h:.5*r},exclusivity_legend:{w:.7*a*.7,h:.1*r}};return e.call(t.setSize(i,a,r),o),n.ids},t.chart.landscape=function(i,a,r){var o={landscape_title:{w:a,h:.05*r},landscape_legend:{w:.15*a,h:r},landscape_axis_sample:{w:.15*a,h:.15*r},landscape_patient_sample:{w:.01*a,h:.15*r},landscape_sample:{w:.59*a,h:.15*r},landscape_scale_option:{w:.1*a,h:.15*r},landscape_axis_group:{w:.15*a,h:.2*r},landscape_patient_group:{w:.01*a,h:.2*r},landscape_group:{w:.59*a,h:.2*r},landscape_option:{w:.1*a,h:.2*r},landscape_gene:{w:.15*a,h:.65*r},landscape_patient_heatmap:{w:.01*a,h:.65*r},landscape_heatmap:{w:.59*a,h:.65*r},landscape_pq:{w:.1*a,h:.65*r}};return e.call(t.setSize(i,a,r),o),n.ids},t}(size||{}),sortOption=function(t){"use strict";function e(t){l.ul.style.visibility="hidden"===l.ul.style.visibility||""===l.ul.style.visibility?"visible":"hidden"}function n(){l.b=document.createElement("button"),l.s=document.createElement("span"),l.i=document.createElement("i"),l.b.id="landscape_sort_select",l.b.addEventListener("click",e),l.i.className="fa fa-sort-amount-desc",l.s.appendChild(l.i),l.b.appendChild(l.s)}function i(){l.ip=document.createElement("input"),l.ip.id="landscape_sort_case_view",l.ip.readOnly=!0,l.ip.tabIndex=-1}function a(t){return l.ul.style.visibility="hidden",l.ip.value=this.innerHTML,l.itemClick(t)}function r(t){l.ul=document.createElement("ul"),l.ul.id="landscape_sort_list",util.loop(t,function(t,e){var n=document.createElement("li");n.appendChild(document.createTextNode(t)),n.addEventListener("click",a),l.ul.appendChild(n)})}function o(){var t=document.createElement("div");return t.id="landscape_sort_area",t}var l={};return t.set=function(t){var e=o();l.itemClick=t.itemClick,e.appendChild((i(),l.ip)),e.appendChild((n(),l.b)),e.appendChild((r(t.subject),l.ul)),l.e=document.getElementById(t.element.replace("#","")),l.e.appendChild(e)},t}(sortOption||{}),survival=function(t){"use strict";var e={};return function(t){(e={}).e=t.element="Object"===util.varType(t.element)?t.element:/\W/.test(t.element[0])?d3.select(t.element):d3.select("#"+t.element),e.s=draw.size(e.e),e.m=size.setMargin(t.margin),e.t=e.m.top||0,e.l=e.m.left||0,e.g=render.addGroup(e.e,e.t,e.l),console.log(t),draw.tab("#"+e.e.attr("id"),["OS","DFS"],["osSurvival","dfsSurvival"])}}(),util=function(t){"use strict";return t.d3v4=function(){return!(d3.version.indexOf("3")>-1)},t.camelCase=function(t){return t.substring(0,1).toUpperCase()+t.substring(1).toLowerCase()},t.loop=function(e,n){if("Array"===t.varType(e))for(var i=0,a=e.length;i<a;i++)n.call(this,e[i],i);else if("Object"===t.varType(e))for(var r in e)n.call(this,r,e[r])},t.cloneObject=function(e){if(null===e||"object"!=typeof e)return e;var n=e.constructor();return t.loop(e,function(t,i){e.hasOwnProperty(t)&&(n[t]=e[t])}),n},t.varType=function(t){var e=Object.prototype.toString.call(t);return e.substring(e.indexOf(" ")+1,e.indexOf("]"))},t.keyToArr=function(e){var n=[];return t.loop(e,function(t,e){n.push(t)}),n},t.minmax=function(t,e){return arguments.length<2?{min:Math.min.apply(null,t),max:Math.max.apply(null,t)}:{min:Math.min.call(null,t,e),max:Math.max.call(null,t,e)}},t.removeWhiteSpace=function(t){return t.replace(/\s/gi,"")},t}(util||{}),variants=function(){return function(t){var e=t.element||null,n=document.querySelector(e),i=t.width||n.style.width||1200,a=t.height||n.style.height||600;console.log("Variants","\nElement: ",e,"\nWidth: ",i,"\nHeight: ",a)}}();